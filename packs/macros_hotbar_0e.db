{"_id":"2xRvRAixuocjCm40","name":"Death Save","type":"script","scope":"global","img":"systems/mosh/images/icons/ui/rolltables/death_save.png","command":"//tell the actor to run the function\nasync function prepTableRoll(tableName,rollString,aimFor,zeroBased,checkCrit,rollAgainst,comparison) {\n  //determine who to run the macro for\n  if (game.settings.get('mosh','macroTarget') === 'character') {\n    //run the function for the player's 'Selected Character'\n    game.user.character.rollTable(tableName,rollString,aimFor,zeroBased,checkCrit,rollAgainst,comparison);\n  } else if (game.settings.get('mosh','macroTarget') === 'token') {\n    //run the function for all selected tokens\n    canvas.tokens.controlled.forEach(function(token){\n      token.actor.rollTable(tableName,rollString,aimFor,zeroBased,checkCrit,rollAgainst,comparison);\n    });\n  }\n}\n\n//pop up the death save dialog box\nnew Dialog({\n  title: `Death Save`,\n  content: `\n    <style>\n      .macro_window{\n        background: rgb(230,230,230);\n        border-radius: 9px;\n      }\n      .macro_img{\n        display: flex;\n        justify-content: center;\n      }\n      .macro_desc{\n        font-family: \"Roboto\", sans-serif;\n        font-size: 10.5pt;\n        font-weight: 400;\n        padding-top: 8px;\n        padding-right: 8px;\n        padding-bottom: 8px;\n      }\n      .grid-2col {\n        display: grid;\n        grid-column: span 2 / span 2;\n        grid-template-columns: repeat(2, minmax(0, 1fr));\n        gap: 2px;\n        padding: 0;\n      }\n    </style>\n    <div class =\"macro_window\" style=\"margin-bottom : 7px;\">\n      <div class=\"grid grid-2col\" style=\"grid-template-columns: 150px auto\">\n        <div class=\"macro_img\"><img src=\"systems/mosh/images/icons/ui/rolltables/death_save.png\" style=\"border:none\"/></div>\n        <div class=\"macro_desc\"><h3>Death Save</h3><strong>Whenever you reach 0 Health, make a Body Save: Failure means you die.</strong> Success means you fall unconscious, make a <strong>Death Save</strong> to find out when you regain consciousness. Crew members with a medscanner, relevant skills like First Aid or Biology, or scientists and androids who pass an <strong>Intellect Check</strong> can determine your condition.</div>    \n      </div>\n    </div>\n    <h4>Select your roll type:</h4>\n  `,\n  buttons: {\n    button1: {\n      label: `Advantage`,\n      callback: () => prepTableRoll(`cZOHlhEJcYGZsQBM`,`1d10 [+]`,`high`,false,false,null,null),\n      icon: `<i class=\"fas fa-angle-double-up\"></i>`\n    },\n    button2: {\n      label: `Normal`,\n      callback: () => prepTableRoll(`cZOHlhEJcYGZsQBM`,`1d10`,`high`,false,false,null,null),\n      icon: `<i class=\"fas fa-minus\"></i>`\n    },\n    button3: {\n      label: `Disadvantage`,\n      callback: () => prepTableRoll(`cZOHlhEJcYGZsQBM`,`1d10 [-]`,`high`,false,false,null,null),\n      icon: `<i class=\"fas fa-angle-double-down\"></i>`\n    }\n  }\n},{width: 600,height: 265}).render(true);","folder":null,"flags":{},"_stats":{"systemId":"mosh","systemVersion":"0.4.0","coreVersion":"11.308","createdTime":1685936572185,"modifiedTime":1693515520278,"lastModifiedBy":"6EeM38DJkcBWNAmw"}}